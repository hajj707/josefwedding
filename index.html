<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no" />
  <meta name="theme-color" content="#0d0f12" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>Joseph & Anna‑Maria — Wedding Invitation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&family=Parisienne&display=swap" rel="stylesheet">
  <style>
    /* ===== MOBILE‑ONLY (PORTRAIT) — no images, same phrases/fonts ===== */
    :root{
      --bg1:#0d0f12; --bg2:#151923; --text:#f6f6f8; --muted:#a3a9b4; --gold:#e9c46a; --rose:#ff7a66; --brand:#8ecae6; --stroke:rgba(255,255,255,.12);
      --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
    html,body{height:100%}
    body{margin:0; color:var(--text); background:linear-gradient(180deg,var(--bg1),var(--bg2));
         font-family:Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial;
         font-size:16px; line-height:1.6; overflow:hidden; overscroll-behavior:none}

    /* Fullscreen mobile stage */
    .app{position:fixed; inset:0; width:100vw; height:100dvh; display:grid; place-items:center}
    .frame{width:100vw; height:100%; display:grid; grid-template-rows:1fr auto; padding:12px calc(env(safe-area-inset-right,0) + 12px) 12px calc(env(safe-area-inset-left,0) + 12px)}

    /* Top hint */
    .top{position:fixed; top:10px; left:12px; right:12px; display:flex; justify-content:center; z-index:2}
    .pill{background:rgba(0,0,0,.42); border:1px solid var(--stroke); color:var(--muted); border-radius:999px; padding:10px 14px; font-size:14px}

    /* Carousel */
    .viewport{position:relative; height:100%}
    .carousel{height:100%; display:flex; transform:translateX(0); transition:transform 320ms ease; touch-action:none; user-select:none}
    .slide{min-width:100%; min-height:100%; display:grid; grid-template-rows:auto 1fr auto; gap:12px; overflow-y:auto; -webkit-overflow-scrolling:touch; padding-bottom:calc(env(safe-area-inset-bottom,0) + 10px)}
    .slide::-webkit-scrollbar{width:0;height:0}

    /* Cards & typography */
    .card{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)); border:1px solid var(--stroke); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px}
    h1.names{font-family:Cinzel, serif; font-weight:700; letter-spacing:1.6px; text-transform:uppercase; margin:6px 0 2px; font-size:clamp(30px,7vw,48px); text-align:center}
    .monoline{font-family:Parisienne, serif; font-size:clamp(42px,11vw,64px); color:var(--gold); text-align:center}
    h2{font-family:Cinzel, serif; font-size:20px; letter-spacing:.8px; text-transform:uppercase; margin:0 0 8px}
    .subtitle{color:var(--muted); font-size:13px; text-align:center}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    a{color:var(--brand); text-decoration:none}
    a:hover{text-decoration:underline}

    /* Countdown */
    .countdown{display:flex; gap:8px; justify-content:center; flex-wrap:wrap}
    .timebox{display:grid; gap:4px; text-align:center; padding:10px 12px; border-radius:12px; background:rgba(0,0,0,.35); border:1px solid var(--stroke); min-width:74px}
    .timebox .num{font-size:28px; font-weight:700}
    .timebox .lbl{font-size:11px; color:var(--muted)}

    /* Timeline */
    .timeline{display:grid; gap:10px}
    .item{display:grid; gap:2px; padding:10px; border-radius:12px; background:rgba(0,0,0,.35); border:1px solid var(--stroke)}
    .kicker{font-size:11px; color:var(--muted); text-transform:uppercase; letter-spacing:.5px}

    /* Dots */
    .dots{display:flex; justify-content:center; gap:6px; padding:8px 0}
    .dot{width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.35)}
    .dot.active{background:var(--rose)}

    /* Form */
    form{display:grid; gap:10px}
    label{font-size:12px; color:var(--muted)}
    input[type="text"], input[type="tel"], input[type="email"], select, textarea{background:rgba(0,0,0,.45); border:1px solid var(--stroke); border-radius:12px; color:var(--text); padding:12px 12px; outline:none; transition:.15s border-color ease; font-size:14px}
    input:focus, select:focus, textarea:focus{border-color:var(--brand)}
    .btn{background:linear-gradient(180deg, #2a2a33, #1a1a22); border:1px solid var(--stroke); color:var(--text); border-radius:12px; padding:12px 16px; font-weight:700; font-size:14px; cursor:pointer}
    .success, .error{border-left:4px solid; padding:10px 12px; border-radius:10px; font-size:13px}
    .success{background:#0e1a12; border-color:#2a9d8f}
    .error{background:#1a0e0e; border-color:#e76f51}

    .hint{font-size:12px; color:var(--muted); text-align:center}
  </style>
</head>
<body>
  <!-- No images background: gradient only -->
  <div class="top"><div class="pill">Swipe left for details</div></div>

  <div class="app">
    <div class="frame">
      <div class="viewport">
        <div id="carousel" class="carousel" role="region" aria-label="Invitation slides">
          <!-- Slide 1: Cover + Countdown -->
          <section class="slide">
            <div class="card" style="text-align:center">
              <div class="monoline">Tap to start</div>
              <h1 class="names">Joseph <span style="color:var(--rose)">&</span> Anna‑Maria</h1>
              <div class="subtitle">are getting married</div>
              <div class="row" style="justify-content:center; gap:10px; margin-top:8px">
                <span class="pill">Date: 06/12/2025 — 18:30</span>
                <a class="pill" target="_blank" href="https://maps.app.goo.gl/maT4gYYdBWh6UuLH7">Location: كنيسة مار فوقا غدير ↗</a>
              </div>
            </div>
            <div class="card">
              <h2>COUNTDOWN</h2>
              <div id="countdown" class="countdown" aria-live="polite">
                <div class="timebox"><div class="num" id="dd">–</div><div class="lbl">Days</div></div>
                <div class="timebox"><div class="num" id="hh">–</div><div class="lbl">Hours</div></div>
                <div class="timebox"><div class="num" id="mm">–</div><div class="lbl">Minutes</div></div>
                <div class="timebox"><div class="num" id="ss">–</div><div class="lbl">Seconds</div></div>
              </div>
              <div class="subtitle" id="countdownNote" style="margin-top:6px"></div>
            </div>
            <div class="hint">Swipe left for schedule →</div>
          </section>

          <!-- Slide 2: Schedule & Locations -->
          <section class="slide">
            <div class="card">
              <h2>Schedule</h2>
              <div class="timeline">
                <div class="item">
                  <div class="kicker">Ceremony</div>
                  <div><strong>18:30</strong> — كنيسة مار فوقا غدير</div>
                  <a target="_blank" href="https://maps.app.goo.gl/maT4gYYdBWh6UuLH7">Open map ↗</a>
                </div>
                <div class="item">
                  <div class="kicker">Sword Arch</div>
                  <div><strong>19:30</strong></div>
                </div>
                <div class="item">
                  <div class="kicker">Wedding Party</div>
                  <div><strong>21:00</strong> — نادي الضباط جونية</div>
                  <a target="_blank" href="https://maps.app.goo.gl/ykKRpVrUQr2jbCAt5">Open map ↗</a>
                </div>
              </div>
            </div>
            <div class="hint">Swipe left to RSVP →</div>
          </section>

          <!-- Slide 3: RSVP -->
          <section class="slide">
            <div class="card">
              <h2>RSVP</h2>
              <p class="subtitle">Please fill out the form. If you can't attend, let us know as well.</p>
              <form id="rsvpForm" novalidate>
                <div class="row" style="gap:10px; flex-wrap:wrap">
                  <div style="flex:1; min-width:160px">
                    <label for="contactName">Full name *</label>
                    <input id="contactName" name="contactName" type="text" required placeholder="e.g., John Doe" />
                  </div>
                  <div style="flex:1; min-width:160px">
                    <label for="phone">Phone (WhatsApp) *</label>
                    <input id="phone" name="phone" type="tel" required placeholder="e.g., +961 3 123 456" />
                  </div>
                </div>
                <div>
                  <label>Attendance *</label>
                  <div class="row">
                    <label><input type="radio" name="attendance" value="Attending" required /> Attending</label>
                    <label><input type="radio" name="attendance" value="Not Attending" /> Not Attending</label>
                  </div>
                </div>
                <div id="guestBlock">
                  <div class="row" style="gap:10px; flex-wrap:wrap">
                    <div>
                      <label for="guestCount">Guests (max 2) *</label>
                      <select id="guestCount" name="guestCount" required>
                        <option value="">Select…</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                      </select>
                    </div>
                    <div style="flex:1; min-width:140px">
                      <label for="guest1">Guest #1 *</label>
                      <input id="guest1" name="guest1" type="text" required />
                    </div>
                    <div style="flex:1; min-width:140px">
                      <label for="guest2">Guest #2</label>
                      <input id="guest2" name="guest2" type="text" />
                    </div>
                  </div>
                </div>
                <div>
                  <label for="notes">Notes (allergies, dietary needs…)</label>
                  <textarea id="notes" name="notes" rows="3"></textarea>
                </div>
                <input type="hidden" name="event" value="Joseph & Anna‑Maria — 06/12/2025 18:30" />
                <input type="hidden" name="source" value="GitHub Pages RSVP" />
                <button id="submitBtn" class="btn" type="submit">Press To Confirm</button>
                <div id="formAlert" role="status" aria-live="polite"></div>
              </form>
            </div>
            <div class="hint">Thank you ♥</div>
          </section>
        </div>
        <div class="dots" aria-hidden="true">
          <div class="dot active"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Background music: file next to index.html named invite-music.mp3 -->
  <audio id="bgm" preload="auto" loop playsinline src="invite-music.mp3"></audio>

  <script>
    // ===== CONFIG =====
    const FORM_ENDPOINT = "https://formspree.io/f/mblzazgw"; // your Formspree ID

    // Swipe carousel (pointer events)
    const carousel = document.getElementById('carousel');
    const dots = Array.from(document.querySelectorAll('.dot'));
    let index = 0, startX = 0, prevX = 0, dragging = false;
    const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
    function go(i){ index = clamp(i,0,carousel.children.length-1); carousel.style.transition = 'transform 320ms ease'; carousel.style.transform = `translateX(${-index*100}%)`; dots.forEach((d,di)=>d.classList.toggle('active', di===index)); }
    function onDown(x){ dragging=true; startX=prevX=x; carousel.style.transition='none'; }
    function onMove(x){ if(!dragging) return; prevX = x; const dx = prevX-startX; const pct = (dx/window.innerWidth)*100; carousel.style.transform = `translateX(${(-index*100) + pct}%)`; }
    function onUp(){ if(!dragging) return; dragging=false; const dx = prevX-startX; const threshold = window.innerWidth*0.18; if(Math.abs(dx)>threshold){ if(dx<0){ go(index+1);} else { go(index-1);} } else { go(index);} }
    carousel.addEventListener('pointerdown', e=>{ if(e.pointerType!=='mouse' || e.buttons===1){ carousel.setPointerCapture(e.pointerId); onDown(e.clientX);} });
    carousel.addEventListener('pointermove', e=>{ if(dragging){ e.preventDefault(); onMove(e.clientX);} }, {passive:false});
    carousel.addEventListener('pointerup', onUp);
    carousel.addEventListener('pointercancel', onUp);

    // Music — start automatically when allowed; otherwise on first tap
    const bgm = document.getElementById('bgm');
    async function tryPlay(){ try{ if(bgm && bgm.paused){ await bgm.play(); } }catch(e){} }
    window.addEventListener('load', tryPlay, {once:true});
    window.addEventListener('touchstart', tryPlay, {once:true});
    window.addEventListener('click', tryPlay, {once:true});

    // Countdown to 2025‑12‑06 18:30 (Asia/Beirut)
    const target = new Date('2025-12-06T18:30:00+02:00');
    const dd = document.getElementById('dd'), hh = document.getElementById('hh'), mm = document.getElementById('mm'), ss = document.getElementById('ss');
    const note = document.getElementById('countdownNote');
    function tick(){
      const now = new Date();
      let diff = target - now;
      if(diff <= 0){ dd.textContent = hh.textContent = mm.textContent = ss.textContent = '0'; note.textContent = "It's time!"; return; }
      const d = Math.floor(diff/86400000); diff%=86400000;
      const h = Math.floor(diff/3600000); diff%=3600000;
      const m = Math.floor(diff/60000); diff%=60000;
      const s = Math.floor(diff/1000);
      dd.textContent = d; hh.textContent = h; mm.textContent = m; ss.textContent = s;
    }
    tick(); setInterval(tick, 1000);

    // ===== RSVP (Formspree JSON) =====
    const $ = (sel, el=document)=>el.querySelector(sel), $$ = (sel, el=document)=>[...el.querySelectorAll(sel)];
    const form = $('#rsvpForm'); if(form){
      const alertBox = $('#formAlert'); const submitBtn = $('#submitBtn');
      const guestBlock = $('#guestBlock'); const guestCount = $('#guestCount'); const guest1 = $('#guest1'); const guest2 = $('#guest2');
      function setAlert(type, msg){ alertBox.className = type; alertBox.textContent = msg; }
      function toggleGuests(){ const attending = form.attendance.value==='Attending'; guestBlock.style.display = attending? 'block':'none'; [guestCount, guest1, guest2].forEach(i=>{ i.required = attending && (i!==guest2 || guestCount.value==='2'); }); if(!attending){ guestCount.value=''; guest1.value=''; guest2.value=''; } }
      $$('input[name=attendance]').forEach(r=>r.addEventListener('change', toggleGuests));
      guestCount.addEventListener('change', ()=>{ guest2.required = guestCount.value==='2'; });
      toggleGuests();
      form.addEventListener('submit', async (e)=>{
        e.preventDefault(); setAlert('', ''); if(!FORM_ENDPOINT){ setAlert('error','Form endpoint missing.'); return; }
        if(!form.checkValidity()){ setAlert('error','Please fill the required fields.'); form.reportValidity(); return; }
        submitBtn.disabled=true; submitBtn.textContent='Sending…';
        const data = {
          contactName: form.contactName.value.trim(),
          phone: form.phone.value.trim(),
          attendance: form.attendance.value,
          guestCount: form.attendance.value==='Attending'? guestCount.value : '0',
          guest1: form.attendance.value==='Attending'? guest1.value.trim() : '',
          guest2: form.attendance.value==='Attending'? guest2.value.trim() : '',
          notes: form.notes.value.trim(),
          event: form.event.value,
          source: form.source.value
        };
        try{
          const res = await fetch(FORM_ENDPOINT, { method:'POST', headers:{'Content-Type':'application/json','Accept':'application/json'}, body: JSON.stringify(data) });
          if(res.ok){ setAlert('success','Thank you! Your RSVP has been recorded.'); submitBtn.textContent='Submitted'; form.reset(); toggleGuests(); }
          else{ const err = await res.json().catch(()=>({})); throw new Error(err.error || `Submission failed (${res.status})`); }
        }catch(err){ console.error(err); setAlert('error', err.message || 'Something went wrong. Please try again.'); submitBtn.textContent='Press To Confirm'; }
        finally{ submitBtn.disabled=false; }
      });
    }
  </script>
</body>
</html>
